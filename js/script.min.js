function testWebP(e){var a=new Image;a.onload=a.onerror=function(){e(2==a.height)},a.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){let e=document.querySelectorAll(".ibg");for(var a=0;a<e.length;a++)e[a].querySelector("img")&&(e[a].style.backgroundImage="url("+e[a].querySelector("img").getAttribute("src")+")")}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),ibg();let iconMenu=document.querySelector(".icon-menu"),body=document.querySelector("body"),menuBody=document.querySelector(".menu__body");function forms(){$("input,textarea").focus((function(){$(this).val()==$(this).attr("data-value")&&($(this).addClass("focus"),$(this).parent().addClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","password"),$(this).val("")),removeError($(this))})),$("input[data-value], textarea[data-value]").each((function(){""!=this.value&&this.value!=$(this).attr("data-value")||($(this).hasClass("l")&&0==$(this).parent().find(".form__label").length?$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>"):this.value=$(this).attr("data-value")),this.value!=$(this).attr("data-value")&&""!=this.value&&($(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).hasClass("l")&&0==$(this).parent().find(".form__label").length&&$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>")),$(this).click((function(){this.value==$(this).attr("data-value")&&("pass"==$(this).attr("data-type")&&$(this).attr("type","password"),this.value="")})),$(this).blur((function(){""==this.value&&($(this).hasClass("l")||(this.value=$(this).attr("data-value")),$(this).removeClass("focus"),$(this).parent().removeClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","text")),$(this).hasClass("vn")&&formValidate($(this))}))})),$(".form-input__viewpass").click((function(e){$(this).hasClass("active")?$(this).parent().find("input").attr("type","password"):$(this).parent().find("input").attr("type","text"),$(this).toggleClass("active")}))}function formValidate(e){var a=0,t=e.parents("form");if("email"==e.attr("name")||e.hasClass("email")){if(e.val()!=e.attr("data-value")){var r=e.val().replace(" ","");e.val(r)}/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.val())&&e.val()!=e.attr("data-value")?removeError(e):(a++,addError(e))}else""==e.val()||e.val()==e.attr("data-value")?(a++,addError(e)):removeError(e);return"checkbox"==e.attr("type")&&(1==e.prop("checked")?e.removeClass("err").parent().removeClass("err"):(a++,e.addClass("err").parent().addClass("err"))),e.hasClass("name")&&(/^[А-Яа-яa-zA-Z-]+( [А-Яа-яa-zA-Z-]+)$/.test(e.val())||(a++,addError(e))),e.hasClass("pass-2")&&(t.find(".pass-1").val()!=t.find(".pass-2").val()?addError(e):removeError(e)),a}function formLoad(){$(".popup").hide(),$(".popup-message-body").hide(),$(".popup-message .popup-body").append('<div class="popup-loading"><div class="popup-loading__title">Идет загрузка...</div><div class="popup-loading__icon"></div></div>'),$(".popup-message").addClass("active").fadeIn(300)}function showMessageByClass(e){$(".popup").hide(),popupOpen("message."+e,"")}function showMessage(e){$(".popup-loading").remove(),$(".popup-message-body").show().html(e)}function clearForm(e){$.each(e.find(".input"),(function(e,a){$(this).removeClass("focus").val($(this).data("value")),$(this).parent().removeClass("focus"),$(this).hasClass("phone")&&maskclear($(this))}))}function addError(e){if(e.addClass("err"),e.parent().addClass("err"),e.parent().find(".form__error").remove(),e.hasClass("email")){var a="";null!=(a=(""==e.val()||(e.val(),e.attr("data-value")),e.data("error")))&&e.parent().append('<div class="form__error">'+a+"</div>")}else null!=e.data("error")&&0==e.parent().find(".form__error").length&&e.parent().append('<div class="form__error">'+e.data("error")+"</div>");e.parents(".select-block").length>0&&(e.parents(".select-block").parent().addClass("err"),e.parents(".select-block").find(".select").addClass("err"))}function addErrorByName(e,a,t){var r=e.find('[name="'+a+'"]');r.attr("data-error",t),addError(r)}function addFormError(e,a){e.find(".form__generalerror").show().html(a)}function removeFormError(e){e.find(".form__generalerror").hide().html("")}function removeError(e){e.removeClass("err"),e.parent().removeClass("err"),e.parent().find(".form__error").remove(),e.parents(".select-block").length>0&&(e.parents(".select-block").parent().removeClass("err"),e.parents(".select-block").find(".select").removeClass("err").removeClass("active"))}function removeFormErrors(e){e.find(".err").removeClass("err"),e.find(".form__error").remove()}iconMenu.addEventListener("click",e=>{iconMenu.classList.toggle("active"),body.classList.toggle("lock"),menuBody.classList.toggle("active")}),$(".slider__body").length>0&&$(".slider__body").slick({autoplay:!0,dots:!0,arrows:!1,accessibility:!1,slidesToShow:1,autoplaySpeed:3e3,adaptiveHeight:!0,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:768,settings:{}}]}),forms(),$("form button[type=submit]").click((function(){var e=0,a=$(this).parents("form"),t=a.data("ms");return $.each(a.find(".req"),(function(a,t){e+=formValidate($(this))})),0==e&&(removeFormError(a),null!=t&&""!=t?(showMessageByClass(t),!1):void 0)}));